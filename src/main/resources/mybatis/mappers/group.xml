<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.group">
    <resultMap id="groupResult" type="groupVO">
        <result property="groupNum" column="groupNum" />
        <result property="groupName" column="groupName" />
        <result property="groupType" column="groupType" />
        <result property="groupPeopleCount" column="groupPeopleCount" />
        <result property="groupDetail" column="groupDetail" />
        <result property="groupStatus" column="groupStatus" />
        <result property="groupEnrollDate" column="groupEnrollDate" />
        <result property="groupModDate" column="groupModDate" />
        <result property="groupArea" column="groupArea" />
        <result property="groupAgeStart" column="groupAgeStart" />
        <result property="groupAgeEnd" column="groupAgeEnd" />
        <result property="groupSex" column="groupSex" />
        <result property="mtNum" column="mtNum" />
        <result property="groupStartDate" column="groupStartDate" />
    </resultMap>
    
    <insert id="insertGroup" parameterType="groupVO">
        insert into grouph
        values (GROUPH_SEQ.NEXTVAL, #{groupName}, 1, 1, #{groupDetail}, 1, sysdate, sysdate, #{groupArea}, #{groupAgeStart}, #{groupAgeEnd}, #{groupSex}, 'mt-1', sysdate )
    </insert>

    <select id="selectGroup" resultMap="groupResult" parameterType="java.util.Map">
        <![CDATA[
            SELECT *
            FROM GROUPH
        ]]>
        <where>
            <if test="groupName != '' and groupName != null">
                groupName = #{groupName}
            </if>
        </where>
    </select>

    <update id="updateGroup" parameterType="groupVO">
        UPDATE GROUPH
        SET groupName = #{groupName},
            <!-- groupPeoleCount -->
            groupDetail = #{groupDetail},
            groupStatus = #{groupStatus},
            groupModdate = sysdate,
            groupArea = #{groupArea},
            groupAgeStart = #{groupAgeStart},
            groupAgeEnd = #{groupAgeEnd},
            groupSex = #{groupSex} ,
            <!-- groupStartDate 수정해야 함 -->
            groupStartDate = sysdate
        WHERE groupNum = #{groupNum}
    </update>

    <delete id="deleteGroup" parameterType="java.util.Map">
        DELETE FROM GROUPH
        WHERE groupNum = #{groupNum}
    </delete>
</mapper>