<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="userMapper">
	<!-- <resultMap id="userInsertResult01" type="userVO">
		<result property="userNum" column="userNum" />
		<result property="id" column="id" />
		<result property="password" column="password" />
		<result property="name" column="name" />
		<result property="sex" column="sex" />
		<result property="phone" column="phone" />
		<result property="address" column="address" /> 
		<result property="email" column="email" />
		<result property="type" column="type" /> 
		<result property="status" column="status" />
		<result property="createdAt" column="createdAt" />
		<result property="updatedAt" column="updatedAt" /> 
	</resultMap> -->
	
	<resultMap id="userResult" type="userVO">
	<result property="userNum" column="userNum" />
		<result property="id" column="id" />
		<result property="password" column="password" />
		<result property="name" column="name" />
		<result property="sex" column="sex" />
		<result property="phone" column="phone" />
		<result property="address" column="address" /> 
		<result property="email" column="email" />
		<result property="type" column="type" /> 
		<result property="status" column="status" />
		<result property="createdAt" column="createdAt" />
		<result property="updatedAt" column="updatedAt" /> 
		<result property="sex2" column="sex2" /> 
	</resultMap>
	
	
	
      <insert id="insertUser" parameterType="userVO">
      <![CDATA[
      INSERT INTO USERS(userNum, id , password, name, sex, phone, address, email, type, status, createdAt)
      VALUES (users_SEQ.nextVal, #{id}, #{password}, #{name}, #{sex}, #{phone}, #{address}, #{email}, 200, 10, sysdate)
      ]]>
	   </insert> 
	   
	   <select id="idCheck" parameterType="String" resultType="int">
	   <![CDATA[
	    select count(*) 
	    from users 
	    where id = #{id} and status=10
	    ]]>
	   </select>
	   
	   <select id="logIn" resultMap="userResult">
	    <![CDATA[
	    select id, password, name, sex, phone, address, email, type, status, createdAt, updatedAt, DECODE(sex, '10', '남자', '20', '여자', '기타') sex2
	    from users where id=#{id} And password=#{password} and status=10
	    
	    ]]>
	    </select>
	   
	   <update id="updateUser" parameterType="String">
	  <![CDATA[
	   update users 
	   set name=#{name}, password=#{password} , sex=#{sex}, phone=#{phone}, address=#{address}, email=#{email}, updatedAt=sysdate
	   where id=#{id} and status=10
	        ]]>
	   </update>
   
	   
	   
</mapper>